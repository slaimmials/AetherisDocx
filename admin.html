<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>CSLua Admin ‚Äî –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ JS</title>
  <style>
    body { background: #23272e; color: #fff; font-family: Arial, sans-serif; margin: 0; padding: 0; }
    .container { max-width: 800px; margin: 40px auto; background: #282c34; padding: 32px 28px 48px 28px; border-radius: 12px; box-shadow: 0 2px 18px #0003; }
    h1 { margin-top: 0; }
    .tabs { display: flex; gap: 12px; margin-bottom: 20px; }
    .tab-btn { background: #3a3e47; border: none; color: #fff; padding: 8px 20px; cursor: pointer; border-radius: 6px 6px 0 0; font-size: 1.1em; }
    .tab-btn.active { background: #212733; font-weight: bold; }
    .section { display: none; }
    .section.active { display: block; }
    .entity-list { margin-bottom: 18px; }
    .entity-item { padding: 7px 0; border-bottom: 1px solid #353945; }
    .entity-item:last-child { border-bottom: none; }
    .btn { background: #495069; color: #fff; border: none; padding: 6px 16px; border-radius: 5px; cursor: pointer; margin-right: 7px; margin-bottom: 4px; }
    .btn-danger { background: #b9002a; }
    .form-group { margin-bottom: 12px; }
    label { display: block; margin-bottom: 3px; }
    input[type="text"], textarea { width: 100%; padding: 5px; font-size: 1em; background: #292e37; color: #fff; border: 1px solid #3a3e47; border-radius: 3px; }
    textarea { resize: vertical; min-height: 34px; }
    .inline-group { display: flex; gap: 8px; align-items: center; margin-bottom: 5px; }
    .small-btn { padding: 2px 7px; font-size: 0.98em; }
    .section-title { font-size: 1.2em; margin-bottom: 10px; }
    .success { color: #8de68d; margin-bottom: 1em; }
    .copy-bar { position: fixed; left:0; right:0; bottom:0; background: #16181e; padding: 14px 0; text-align: center; box-shadow: 0 -2px 20px #0006;}
    .copy-bar .btn {font-size: 1.1em; background: #3a3e47;}
    .copy-bar .btn:active {background: #282c34;}
    .copy-bar span {color:#7bff99; margin-left:12px;}
    @media (max-width: 700px) {
      .container {padding:10px;}
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>CSLua API ‚Äî –ê–¥–º–∏–Ω–∫–∞</h1>
    <p style="color:#b0b2c0;">–†–µ–¥–∞–∫—Ç–∏—Ä—É–π –¥–∞–Ω–Ω—ã–µ. –ö–æ–≥–¥–∞ –≤—Å—ë –≥–æ—Ç–æ–≤–æ ‚Äî –Ω–∞–∂–º–∏ <b>¬´–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ JS¬ª</b> –∏ –≤—Å—Ç–∞–≤—å –≤ —Å–≤–æ–π <code>apidocu-data.js</code> —Ñ–∞–π–ª!</p>
    <div class="tabs">
      <button class="tab-btn active" data-tab="langs">–õ–µ–π–±–ª—ã</button>
      <button class="tab-btn" data-tab="functions">–§—É–Ω–∫—Ü–∏–∏</button>
      <button class="tab-btn" data-tab="structs">–ö–ª–∞—Å—Å—ã</button>
      <button class="tab-btn" data-tab="examples">–ü—Ä–∏–º–µ—Ä—ã</button>
      <button class="tab-btn" data-tab="labels">–ù–∞–≤–∏–≥–∞—Ü–∏—è</button>
    </div>
    <div id="langs" class="section active"></div>
    <div id="functions" class="section"></div>
    <div id="structs" class="section"></div>
    <div id="examples" class="section"></div>
    <div id="labels" class="section"></div>
  </div>
  <div class="copy-bar">
    <button class="btn" onclick="exportAsJS()">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ JS</button>
    <span id="copied-label" style="display:none;">‚úì –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!</span>
  </div>
  <script>
    // ==== –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ====
window.ApiDocuLangs = {
  "ru": {
    "field": "–ü–æ–ª–µ",
    "type": "–¢–∏–ø",
    "desc": "–û–ø–∏—Å–∞–Ω–∏–µ",
    "constructor": "–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä:",
    "methods": "–ú–µ—Ç–æ–¥—ã:",
    "method": "–ú–µ—Ç–æ–¥",
    "returns": "–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:",
    "param": "–ü–∞—Ä–∞–º–µ—Ç—Ä",
    "example": "–ü—Ä–∏–º–µ—Ä"
  },
  "en": {
    "field": "Field",
    "type": "Type",
    "desc": "Description",
    "constructor": "Constructor:",
    "methods": "Methods:",
    "method": "Method",
    "returns": "Returns:",
    "param": "Parameter",
    "example": "Example"
  }
};

const docFunctions = [
  {
    "name": "draw.rect",
    "desc": {
      "ru": "–†–∏—Å—É–µ—Ç –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º.",
      "en": "Draws a rectangle at the specified coordinates."
    },
    "args": [
      {
        "name": "from",
        "type": "Vector2",
        "desc": {
          "ru": "–ù–∞—á–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã",
          "en": "Start coordinate"
        }
      },
      {
        "name": "to",
        "type": "Vector2",
        "desc": {
          "ru": "–ö–æ–Ω–µ—á–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã",
          "en": "End coordinate"
        }
      }
    ],
    "returns": "class Rect",
    "example": "draw.rect( Vector2(0,0) , Vector2(200,200) )"
  },
  {
    "name": "draw.text",
    "desc": {
      "ru": "–†–∏—Å—É–µ—Ç —Ç–µ–∫—Å—Ç –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º.",
      "en": "Draws text at the specified coordinates."
    },
    "args": [
      {
        "name": "position",
        "type": "Vector2",
        "desc": {
          "ru": "–ü–æ–∑–∏—Ü–∏—è —Ç–µ–∫—Å—Ç–∞",
          "en": "Text position"
        }
      },
      {
        "name": "text",
        "type": "string",
        "desc": {
          "ru": "–¢–µ–∫—Å—Ç",
          "en": "Text"
        }
      },
      {
        "name": "size",
        "type": "float",
        "desc": {
          "ru": "–†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞",
          "en": "Text size"
        }
      }
    ],
    "returns": "class Text",
    "example": "draw.text( Vector2(), \"test\", 16)"
  },
  {
    "name": "view.WorldToScreen",
    "desc": {
      "ru": "–ü–æ–ª—É—á–∞–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ–±—ä–µ–∫—Ç–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ.",
      "en": "Gets the coordinates of an object on the screen."
    },
    "args": [
      {
        "name": "point",
        "type": "Vector3",
        "desc": {
          "ru": "–ü–æ–∑–∏—Ü–∏—è –≤ –∏–≥—Ä–µ",
          "en": "World point"
        }
      }
    ],
    "returns": "Vector2"
  },
  {
    "name": "view.CalculateAngles",
    "desc": {
      "ru": "–†–∞—Å—Å—á–∏—Ç—ã–≤–µ—Ç —É–≥–æ–ª –º–µ–∂–¥—É –¥–≤—É–º—è —Ç–æ—á–∫–∞–º–∏.",
      "en": "Calculates the angle between two points."
    },
    "args": [
      {
        "name": "point",
        "type": "Vector3",
        "desc": {
          "ru": "–¢–æ—á–∫–∞ –æ—Ç",
          "en": "Point from"
        }
      },
      {
        "name": "point",
        "type": "Vector3",
        "desc": {
          "ru": "–¢–æ—á–∫–∞ –∫",
          "en": "Point to"
        }
      }
    ],
    "returns": "Vector3"
  },
  {
    "name": "view.Normalize",
    "desc": {
      "ru": "–ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –≤–µ–∫—Ç–æ—Ä(–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ).",
      "en": "Normalizes a vector."
    },
    "args": [
      {
        "name": "point",
        "type": "Vector3",
        "desc": {
          "ru": "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ",
          "en": "Vector"
        }
      }
    ],
    "returns": "Vector3"
  },
  {
    "name": "view.SetViewAngles",
    "desc": {
      "ru": "–ú–µ–Ω—è–µ—Ç –≤–∞—à–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∑–≥–ª—è–¥–∞",
      "en": "Edits your view angles"
    },
    "args": [
      {
        "name": "vector",
        "type": "Vector3",
        "desc": {
          "ru": "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ",
          "en": "Angle"
        }
      }
    ],
    "returns": "Vector3"
  },
  {
    "name": "hook.Add",
    "desc": {
      "ru": "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ –∏–≥—Ä—ã",
      "en": "Registering a handler for an specific event"
    },
    "args": [
      {
        "name": "hookName",
        "type": "string",
        "desc": {
          "ru": "–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–æ–±—ã—Ç–∏—è",
          "en": "Event ID"
        }
      },
      {
        "name": "id",
        "type": "string",
        "desc": {
          "ru": "–ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä",
          "en": "Custom ID"
        }
      },
      {
        "name": "func",
        "type": "function",
        "desc": {
          "ru": "–§—É–Ω–∫—Ü–∏—è-—Ç—Ä–∏–≥–≥–µ—Ä, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏—è",
          "en": "Trigger function, called when registering an event"
        }
      }
    ],
    "returns": "nil",
    "example": "hook.Add(\"Think\", \"test\", function()\n    print(\"function calling every tick\")\nend)"
  },
  {
    "name": "hook.Remove",
    "desc": {
      "ru": "–£–¥–∞–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ –∏–≥—Ä—ã",
      "en": "Deleting a handler for a game event"
    },
    "args": [
      {
        "name": "hookName",
        "type": "string",
        "desc": {
          "ru": "–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–æ–±—ã—Ç–∏—è",
          "en": "Event ID"
        }
      },
      {
        "name": "id",
        "type": "string",
        "desc": {
          "ru": "–ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä",
          "en": "Custom ID"
        }
      }
    ],
    "returns": "nil",
    "example": "hook.Remove(\"Think\", \"test\")"
  }
];

const docStructs = [
  {
    "name": "Vector2",
    "fields": [
      {
        "name": "x",
        "type": "float",
        "desc": {
          "ru": "X-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞",
          "en": "X coordinate"
        }
      },
      {
        "name": "y",
        "type": "float",
        "desc": {
          "ru": "Y-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞",
          "en": "Y coordinate"
        }
      }
    ]
  },
  {
    "name": "Vector3",
    "fields": [
      {
        "name": "x",
        "type": "float",
        "desc": {
          "ru": "X-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞",
          "en": "X coordinate"
        }
      },
      {
        "name": "y",
        "type": "float",
        "desc": {
          "ru": "Y-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞",
          "en": "Y coordinate"
        }
      },
      {
        "name": "z",
        "type": "float",
        "desc": {
          "ru": "Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞",
          "en": "Z coordinate"
        }
      }
    ]
  },
  {
    "name": "Color",
    "fields": [
      {
        "name": "r",
        "type": "float",
        "desc": {
          "ru": "–ö—Ä–∞—Å–Ω—ã–π",
          "en": "Red"
        }
      },
      {
        "name": "g",
        "type": "float",
        "desc": {
          "ru": "–ó–µ–ª—ë–Ω—ã–π",
          "en": "Green"
        }
      },
      {
        "name": "b",
        "type": "float",
        "desc": {
          "ru": "–°–∏–Ω–∏–π",
          "en": "Blue"
        }
      },
      {
        "name": "a",
        "type": "float",
        "desc": {
          "ru": "–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å",
          "en": "Alpha"
        }
      }
    ]
  },
  {
    "name": "Player",
    "noConstructor": true,
    "fields": [
      {
        "name": "health",
        "type": "float",
        "desc": {
          "ru": "–¢–µ–∫—É—â–µ–µ –∑–¥–æ—Ä–æ–≤—å–µ",
          "en": "Current health"
        },
        "private": false
      },
      {
        "name": "team",
        "type": "float",
        "desc": {
          "ru": "–ù–æ–º–µ—Ä –∫–æ–º–∞–Ω–¥—ã",
          "en": "Team number"
        },
        "private": false
      },
      {
        "name": "name",
        "type": "string",
        "desc": {
          "ru": "–ò–º—è –∏–≥—Ä–æ–∫–∞",
          "en": "Player name"
        },
        "private": false
      },
      {
        "name": "weapon",
        "type": "string",
        "desc": {
          "ru": "–û—Ä—É–∂–∏–µ –∫–æ—Ç–æ—Ä–æ–µ –¥–µ—Ä–∂–∏—Ç –∏–≥—Ä–æ–∫",
          "en": "The weapon that the player holds"
        },
        "private": false
      },
      {
        "name": "pawnAddr",
        "type": "uintptr_t",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": true
      },
      {
        "name": "controllerAddr",
        "type": "uintptr_t",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": true
      }
    ],
    "methods": [
      {
        "name": "isValid",
        "args": [],
        "returns": "bool",
        "desc": {
          "ru": "–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∏–≥—Ä–æ–∫–∞",
          "en": "Checks if player valid"
        },
        "private": false
      },
      {
        "name": "isScoped",
        "args": [],
        "returns": "bool",
        "desc": {
          "ru": "–í –ø—Ä–∏—Ü–µ–ª–µ –ª–∏ –∏–≥—Ä–æ–∫",
          "en": "Is player scoped"
        },
        "private": false
      },
      {
        "name": "GetPos",
        "args": [],
        "returns": "Vector3",
        "desc": {
          "ru": "–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –∏–≥—Ä–æ–∫–∞",
          "en": "Returns the player's position"
        },
        "private": false
      },
      {
        "name": "GetVelocity",
        "args": [],
        "returns": "Vector3",
        "desc": {
          "ru": "–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –∏–≥—Ä–æ–∫–∞ –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ",
          "en": "Returns the player's speed in space"
        },
        "private": false
      },
      {
        "name": "alive",
        "args": [],
        "returns": "bool",
        "desc": {
          "ru": "–ñ–∏–≤ –ª–∏ –∏–≥—Ä–æ–∫",
          "en": "Is the player alive"
        },
        "private": false
      }
    ]
  },
  {
    "name": "Rect",
    "noConstructor": true,
    "fields": [
      {
        "name": "p1",
        "type": "Vector2",
        "desc": "Top-left corner"
      },
      {
        "name": "p2",
        "type": "Vector2",
        "desc": "Bottom-right corner"
      },
      {
        "name": "color",
        "type": "Color",
        "desc": "Rectangle color"
      },
      {
        "name": "rounding",
        "type": "float",
        "desc": "Corner radius"
      },
      {
        "name": "visible",
        "type": "bool",
        "desc": "Is rectangle visible",
        "default": "true"
      },
      {
        "name": "destroyed",
        "type": "bool",
        "desc": "Was rectangle destroyed",
        "default": "false"
      }
    ]
  },
  {
    "name": "Text",
    "noConstructor": true,
    "fields": [
      {
        "name": "pos",
        "type": "Vector2",
        "desc": "Text position"
      },
      {
        "name": "text",
        "type": "string",
        "desc": "Text string"
      },
      {
        "name": "color",
        "type": "Color",
        "desc": "Text color"
      },
      {
        "name": "size",
        "type": "float",
        "desc": "Font size"
      },
      {
        "name": "visible",
        "type": "bool",
        "desc": "Is text visible",
        "default": "true"
      },
      {
        "name": "destroyed",
        "type": "bool",
        "desc": "Was text destroyed",
        "default": "false"
      }
    ]
  },
  {
    "name": "Ents",
    "noConstructor": true,
    "fields": [
      {
        "name": "clientBase",
        "type": "uintptr_t",
        "private": true
      }
    ],
    "methods": [
      {
        "name": "LocalPlayer",
        "args": [],
        "returns": "Player",
        "desc": {
          "ru": "–õ–æ–∫–∞–ª—å–Ω—ã–π –∏–≥—Ä–æ–∫",
          "en": "Local player"
        }
      },
      {
        "name": "GetPlayers",
        "args": [],
        "returns": "table&lt;Player&gt;",
        "desc": {
          "ru": "–°–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤",
          "en": "List of players"
        }
      }
    ]
  },
  {
    "name": "world",
    "noConstructor": true,
    "fields": [
      {
        "name": "ents",
        "type": "Ents"
      },
      {
        "name": "game",
        "type": "GameRules"
      }
    ],
    "methods": [
      {
        "name": "isLoaded",
        "args": [],
        "returns": "bool",
        "desc": {
          "ru": "–ó–∞–≥—Ä—É–∂–µ–Ω –ª–∏ –º–∏—Ä",
          "en": "Is world loaded"
        }
      }
    ]
  },
  {
    "name": "GameRules",
    "noConstructor": true,
    "fields": [
      {
        "name": "isWarmupPeriod",
        "type": "bool",
        "desc": {
          "ru": "–ò–¥—ë—Ç –ª–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞",
          "en": "Are warmup underway"
        },
        "private": false
      },
      {
        "name": "isBombDropped",
        "type": "bool",
        "desc": {
          "ru": "–°–±—Ä–æ—à–µ–Ω–∞ –ª–∏ –±–æ–º–±–∞",
          "en": "Has the bomb been dropped"
        },
        "private": false
      },
      {
        "name": "isBombPlanted",
        "type": "bool",
        "desc": {
          "ru": "–ó–∞–ª–æ–∂–µ–Ω–∞ –ª–∏ –±–æ–º–±–∞",
          "en": "Is bomb planted"
        },
        "private": false
      },
      {
        "name": "isFreezePeriod",
        "type": "bool",
        "desc": {
          "ru": "–ò–¥—ë—Ç –ª–∏ –ø–µ—Ä–∏–æ–¥ –∑–∞–º–æ—Ä–æ–∑–∫–∏",
          "en": "Is there a freezing period"
        },
        "private": false
      },
      {
        "name": "isServerPaused",
        "type": "bool",
        "desc": {
          "ru": "–ò–¥—ë—Ç –ª–∏ –ø–µ—Ä–∏–æ–¥ –ø–∞—É–∑—ã",
          "en": "Is there a pause period"
        },
        "private": false
      },
      {
        "name": "roundTime",
        "type": "int",
        "desc": {
          "ru": "–í—Ä–µ–º—è —Ä–∞—É–Ω–¥–∞",
          "en": "Round time"
        },
        "private": false
      },
      {
        "name": "MatchStartTime",
        "type": "int",
        "desc": {
          "ru": "–í—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞ –º–∞—Ç—á–∞",
          "en": "Match start time"
        },
        "private": false
      },
      {
        "name": "gamePhase",
        "type": "int",
        "desc": {
          "ru": "–¢–µ–∫—É—â–∞—è —Ñ–∞–∑–∞ –∏–≥—Ä—ã",
          "en": "The current phase of the game"
        },
        "private": false
      },
      {
        "name": "totalRoundsPlayed",
        "type": "int",
        "desc": {
          "ru": "–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—ã–≥—Ä–∞–Ω–Ω—ã—Ö —Ä–∞—É–Ω–¥–æ–≤",
          "en": "Total number of rounds played"
        },
        "private": false
      },
      {
        "name": "hostagesRemaining",
        "type": "int",
        "desc": {
          "ru": "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–≤",
          "en": "Number of remaining opponents"
        },
        "private": false
      },
      {
        "name": "RoundEndWinnerTeam",
        "type": "int",
        "desc": {
          "ru": "–ü–æ–±–µ–¥–∏–≤—à–∞—è –∫–æ–º–∞–Ω–¥–∞",
          "en": "The winning team"
        },
        "private": false
      },
      {
        "name": "RoundEndReason",
        "type": "int",
        "desc": {
          "ru": "–ü—Ä–∏—á–∏–Ω–∞ –∫–æ–Ω—Ü–∞ —Ä–∞—É–Ω–¥–∞",
          "en": "The reason for the end of the round"
        },
        "private": false
      }
    ],
    "methods": []
  },
  {
    "name": "input",
    "noConstructor": true,
    "fields": [],
    "methods": [
      {
        "name": "IsKeyDown",
        "args": [
          {
            "name": "key",
            "type": "int"
          }
        ],
        "returns": "bool",
        "desc": {
          "ru": "–ù–∞–∂–∞—Ç–∞ –ª–∏ –∫–ª–∞–≤–∏—à–∞",
          "en": "Is key down"
        },
        "private": false
      },
      {
        "name": "MousePos",
        "args": [],
        "returns": "Vector2",
        "desc": {
          "ru": "–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –º—ã—à–∏",
          "en": "Returns mouse position"
        },
        "private": false
      }
    ]
  },
  {
    "name": "keys",
    "noConstructor": false,
    "fields": [
      {
        "name": "KEY_A-Z",
        "type": "int",
        "desc": {
          "ru": "A-Z",
          "en": "A-Z"
        },
        "private": false
      },
      {
        "name": "KEY_0-9",
        "type": "int",
        "desc": {
          "ru": "0-9",
          "en": "0-9"
        },
        "private": false
      },
      {
        "name": "KEY_F1-F12",
        "type": "int",
        "desc": {
          "ru": "F1-F12",
          "en": "F1-F12"
        },
        "private": false
      },
      {
        "name": "KEY_UP",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_DOWN",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_LEFT",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_RIGHT",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_LSHIFT",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_RSHIFT",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_LCTRL",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_RCTRL",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_LALT",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_RALT",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_LWIN",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_RWIN",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_SPACE",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_TAB",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_ENTER",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_ESCAPE",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_BACKSPACE",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_DELETE",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_INSERT",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_HOME",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_END",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_PAGEUP",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_PAGEDOWN",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_NUMPAD0",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_NUMPAD1",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_NUMPAD2",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_NUMPAD3",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_NUMPAD4",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_NUMPAD5",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_NUMPAD6",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_NUMPAD7",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_NUMPAD8",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_NUMPAD9",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_NUMPAD_DECIMAL",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_NUMPAD_DIVIDE",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_NUMPAD_MULTIPLY",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_NUMPAD_SUBTRACT",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_NUMPAD_ADD",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_NUMPAD_SEPARATOR",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_CAPSLOCK",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_NUMLOCK",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_SCROLLLOCK",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_PRINTSCREEN",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_PAUSE",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_APPS",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_MENU",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_PERIOD",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_COMMA",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_MINUS",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_PLUS",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_SEMICOLON",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_SLASH",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_TILDE",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_LBRACKET",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_BACKSLASH",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_RBRACKET",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "KEY_APOSTROPHE",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "MB_LBUTTON",
        "type": "int",
        "desc": {
          "ru": "–õ–µ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –º—ã—à–∏",
          "en": "Left mouse button"
        },
        "private": false
      },
      {
        "name": "MB_RBUTTON",
        "type": "int",
        "desc": {
          "ru": "–ü—Ä–∞–≤–∞—è –∫–Ω–æ–ø–∫–∞ –º—ã—à–∏",
          "en": "Right mouse button"
        },
        "private": false
      },
      {
        "name": "MB_MBUTTON",
        "type": "int",
        "desc": {
          "ru": "–ö–æ–ª—ë—Å–∏–∫–æ –º—ã—à–∏",
          "en": "Middle mouse button (Wheel)"
        },
        "private": false
      },
      {
        "name": "MB_XBUTTON1",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      },
      {
        "name": "MB_XBUTTON2",
        "type": "int",
        "desc": {
          "ru": "",
          "en": ""
        },
        "private": false
      }
    ],
    "methods": []
  }
];

const docExamples = [
  {
    "title": {
      "ru": "–ü–æ–ª—É—á–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é –∏–≥—Ä–æ–∫–æ–≤",
      "en": "Get position of all players"
    },
    "code": "for _, player in ipairs(world.ents:GetPlayers()) do\n    if player:isValid() and player:alive() then\n        print(player.pos.x, player:pos().y, player:pos().z)\n    end\nend"
  },
  {
    "title": {
      "ru": "–ü–æ–ª—É—á–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞",
      "en": "Check hp of local player"
    },
    "code": "localplayer = world.ents:LocalPlayer()\nif localplayer:isValid() then\n    print(\"HP:\", localplayer:health())\nend"
  }
];

const LANGS = {
  "ru": {
    "title-main": "CSLua API ‚Äî –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è",
    "nav-functions": "–§—É–Ω–∫—Ü–∏–∏",
    "nav-classes": "–ö–ª–∞—Å—Å—ã",
    "nav-examples": "–ü—Ä–∏–º–µ—Ä—ã",
    "nav-references": "–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏"
  },
  "en": {
    "title-main": "CSLua API ‚Äî Documentation",
    "nav-functions": "Functions",
    "nav-classes": "Classes",
    "nav-examples": "Examples",
    "nav-references": "References"
  }
};

const docReferences = [
  {
    key: "hooks",
    title: {
      ru: "–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ö—É–∫–∏",
      en: "Available Hooks"
    },
    items: [
      {
        name: "Think",
        desc: {
          ru: "–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–æ—Ç–æ–∫–∞ DLL",
          en: "Called every time the DLL thread is updated"
        }
      },
      {
        name: "DrawGui",
        desc: {
          ru: "–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞",
          en: "Called when UI is rendered"
        }
      },
      {
        name: "PlayerDeath",
        wip: true,
        desc: {
          ru: "–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–º–µ—Ä—Ç–∏ –∏–≥—Ä–æ–∫–∞",
          en: "Called when player dies"
        }
      },
      {
        name: "PlayerSpawn",
        wip: true,
        desc: {
          ru: "–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–ø–∞–≤–Ω–µ –∏–≥—Ä–æ–∫–∞",
          en: "Called when player spawning"
        }
      }
      
    ]
  },
  {
    key: "events",
    title: {
      ru: "–°–æ–±—ã—Ç–∏—è –∏–≥—Ä—ã",
      en: "Game Events"
    },
    items: [
      // ... —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π
    ]
  }
];    


// ================== –†–ï–ù–î–ï–†–ò–ù–ì =====================

    // Tabs logic
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.onclick = () => {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById(btn.dataset.tab).classList.add('active');
        renderTab(btn.dataset.tab);
      };
    });

    function renderTab(tab) {
      if (tab === 'langs') renderLangs();
      if (tab === 'functions') renderFunctions();
      if (tab === 'structs') renderStructs();
      if (tab === 'examples') renderExamples();
      if (tab === 'labels') renderLabels();
    }
    function renderLangs() {
      const cont = document.getElementById('langs');
      cont.innerHTML = `<div class="section-title">–õ–µ–π–±–ª—ã –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è</div>
      <div>
        <form id="langs-form">
          ${['ru', 'en'].map(lang => `
            <fieldset style="margin-bottom:12px;border:1px solid #353945;border-radius:6px;padding:10px;">
              <legend>${lang === 'ru' ? '–†—É—Å—Å–∫–∏–π' : 'English'}</legend>
              ${Object.keys(ApiDocuLangs[lang]).map(key => `
                <div class="form-group">
                  <label>${key}:</label>
                  <input type="text" name="${lang}-${key}" value="${ApiDocuLangs[lang][key]}">
                </div>
              `).join('')}
            </fieldset>
          `).join('')}
        </form>
      </div>`;
      document.querySelectorAll('#langs-form input').forEach(el => {
        el.oninput = function() {
          const [lang, key] = el.name.split('-');
          ApiDocuLangs[lang][key] = el.value;
        };
      });
    }
    function renderFunctions() {
      const cont = document.getElementById('functions');
      cont.innerHTML = `<div class="section-title">–§—É–Ω–∫—Ü–∏–∏</div>
        <div class="entity-list">
          ${docFunctions.map((f, i) => `
            <div class="entity-item">
              <b>${f.name}</b>
              <button class="btn small-btn" onclick="editFunction(${i})">‚úé</button>
              <button class="btn btn-danger small-btn" onclick="deleteFunction(${i})">‚®â</button>
            </div>
          `).join('')}
        </div>
        <button class="btn" onclick="addFunction()">–î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é</button>
        <div id="function-form-block"></div>`;
    }
    function renderStructs() {
      const cont = document.getElementById('structs');
      cont.innerHTML = `<div class="section-title">–ö–ª–∞—Å—Å—ã/–°—Ç—Ä—É–∫—Ç—É—Ä—ã</div>
        <div class="entity-list">
          ${docStructs.map((s, i) => `
            <div class="entity-item">
              <b>${s.name}</b>
              <button class="btn small-btn" onclick="editStruct(${i})">‚úé</button>
              <button class="btn btn-danger small-btn" onclick="deleteStruct(${i})">‚®â</button>
            </div>
          `).join('')}
        </div>
        <button class="btn" onclick="addStruct()">–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∞—Å—Å/—Å—Ç—Ä—É–∫—Ç—É—Ä—É</button>
        <div id="struct-form-block"></div>`;
    }
    window.renderFunctions = renderFunctions;
    function editFunction(idx) {
      showFunctionForm(JSON.parse(JSON.stringify(docFunctions[idx])), idx);
    }
    function addFunction() {
      showFunctionForm({ name: '', desc: { ru: '', en: '' }, args: [], returns: '', example: '' }, null);
    }
    function deleteFunction(idx) {
      if (confirm('–£–¥–∞–ª–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é?')) {
        docFunctions.splice(idx, 1);
        renderFunctions();
      }
    }
    window.cancelEdit = function(type) {
      if (type === 'function') {
        document.getElementById('function-form-block').innerHTML = '';
      } else if (type === 'struct') {
        document.getElementById('struct-form-block').innerHTML = '';
      } else if (type === 'example') {
        document.getElementById('example-form-block').innerHTML = '';
      }
    };
    window.editFunction = editFunction;
    window.addFunction = addFunction;
    window.deleteFunction = deleteFunction;
    function showFunctionForm(f, idx) {
      const block = document.getElementById('function-form-block');
      block.innerHTML = `
        <form onsubmit="return saveFunction(event, ${idx})">
          <div class="form-group"><label>–ò–º—è:</label>
            <input type="text" required name="name" value="${f.name || ''}">
          </div>
          <div class="form-group"><label>–û–ø–∏—Å–∞–Ω–∏–µ (ru):</label>
            <input type="text" name="desc-ru" value="${(f.desc && f.desc.ru) || ''}">
          </div>
          <div class="form-group"><label>–û–ø–∏—Å–∞–Ω–∏–µ (en):</label>
            <input type="text" name="desc-en" value="${(f.desc && f.desc.en) || ''}">
          </div>
          <div class="form-group"><label>–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:</label>
            <input type="text" name="returns" value="${f.returns || ''}">
          </div>
          <div class="form-group"><label>–ü—Ä–∏–º–µ—Ä:</label>
            <textarea name="example">${f.example || ''}</textarea>
          </div>
          <div class="form-group args-block">
            <label>–ê—Ä–≥—É–º–µ–Ω—Ç—ã:</label>
            <div id="args">
              ${(f.args || []).map((a, j) => `
                <div class="inline-group">
                  <input type="text" placeholder="–∏–º—è" value="${a.name || ''}" data-arg="name" data-idx="${j}">
                  <input type="text" placeholder="—Ç–∏–ø" value="${a.type || ''}" data-arg="type" data-idx="${j}">
                  <input type="text" placeholder="–æ–ø–∏—Å–∞–Ω–∏–µ (ru)" value="${(a.desc && a.desc.ru) || ''}" data-arg="desc-ru" data-idx="${j}">
                  <input type="text" placeholder="–æ–ø–∏—Å–∞–Ω–∏–µ (en)" value="${(a.desc && a.desc.en) || ''}" data-arg="desc-en" data-idx="${j}">
                  <button type="button" class="btn btn-danger small-btn" onclick="removeArg(${j}, ${idx})">‚®â</button>
                </div>
              `).join('')}
            </div>
            <button type="button" class="btn small-btn" onclick="addArg(${idx})">–î–æ–±–∞–≤–∏—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç</button>
          </div>
          <button class="btn" type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <button class="btn btn-danger" type="button" onclick="cancelEdit('function')">–û—Ç–º–µ–Ω–∞</button>
        </form>
      `;
      // –ê—Ä–≥—É–º–µ–Ω—Ç—ã
      window.removeArg = function(j, i) {
        if(idx==null) f.args.splice(j, 1);
        else docFunctions[idx].args.splice(j, 1);
        showFunctionForm(idx==null?f:docFunctions[idx], idx);
      };
      window.addArg = function(i) {
        if(idx==null) (f.args||(f.args=[])).push({ name:'', type:'', desc:{ru:'',en:''} });
        else (docFunctions[idx].args||(docFunctions[idx].args=[])).push({ name:'', type:'', desc:{ru:'',en:''} });
        showFunctionForm(idx==null?f:docFunctions[idx], idx);
      };
      block.querySelectorAll('input,textarea').forEach(el => {
        el.oninput = function() {
          if(el.name === 'name') f.name = el.value;
          if(el.name === 'desc-ru') (f.desc||(f.desc={})).ru = el.value;
          if(el.name === 'desc-en') (f.desc||(f.desc={})).en = el.value;
          if(el.name === 'returns') f.returns = el.value;
          if(el.name === 'example') f.example = el.value;
          if(el.dataset.arg) {
            let j = +el.dataset.idx;
            let arg = f.args[j];
            if(el.dataset.arg === 'name') arg.name = el.value;
            if(el.dataset.arg === 'type') arg.type = el.value;
            if(el.dataset.arg === 'desc-ru') (arg.desc||(arg.desc={})).ru = el.value;
            if(el.dataset.arg === 'desc-en') (arg.desc||(arg.desc={})).en = el.value;
          }
        };
      });
    }
    window.saveFunction = function(ev, idx) {
      ev.preventDefault();

      // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º—ã
      const form = ev.target;
      const f = {
        name: form.name.value,
        desc: { ru: form['desc-ru'].value, en: form['desc-en'].value },
        args: [],
        returns: form.returns.value,
        example: form.example.value,
      };

      // –°–æ–±—Ä–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã
      const argsBlock = form.querySelectorAll('.args-block .inline-group');
      argsBlock.forEach(group => {
        const inputs = group.querySelectorAll('input');
        f.args.push({
          name: inputs[0].value,
          type: inputs[1].value,
          desc: { ru: inputs[2].value, en: inputs[3].value }
        });
      });

      if (idx == null) docFunctions.push(f);
      else docFunctions[idx] = f;

      renderFunctions();
      document.getElementById('function-form-block').innerHTML = '<div class="success">–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!</div>';
      setTimeout(()=>document.getElementById('function-form-block').innerHTML='', 800);
      return false;
    };

    window.renderStructs = renderStructs;

    function editStruct(idx) {
      showStructForm(JSON.parse(JSON.stringify(docStructs[idx])), idx);
    }
    function addStruct() { showStructForm({ name:'', fields:[], methods:[] }, null); }
    function deleteStruct(idx) {
      if(confirm('–£–¥–∞–ª–∏—Ç—å –∫–ª–∞—Å—Å?')) {
        docStructs.splice(idx, 1);
        renderStructs();
      }
    }
    window.editStruct = editStruct;
    window.addStruct = addStruct;
    window.deleteStruct = deleteStruct;
    function showStructForm(s, idx) {
      const block = document.getElementById('struct-form-block');
      block.innerHTML = `
        <form onsubmit="return saveStruct(event,${idx})">
          <div class="form-group"><label>–ò–º—è:</label>
            <input type="text" required name="name" value="${s.name||''}">
          </div>
          <div class="form-group"><label><input type="checkbox" name="noConstructor" ${s.noConstructor?'checked':''}> –ë–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞</label>
          </div>
          <div class="form-group fields-block">
            <label>–ü–æ–ª—è:</label>
            <div id="fields">
              ${(s.fields||[]).map((f,j) => `
                <div class="inline-group">
                  <input type="text" placeholder="–∏–º—è" value="${f.name||''}" data-field="name" data-idx="${j}">
                  <input type="text" placeholder="—Ç–∏–ø" value="${f.type||''}" data-field="type" data-idx="${j}">
                  <input type="text" placeholder="–æ–ø–∏—Å–∞–Ω–∏–µ (ru)" value="${(f.desc&&f.desc.ru)||''}" data-field="desc-ru" data-idx="${j}">
                  <input type="text" placeholder="–æ–ø–∏—Å–∞–Ω–∏–µ (en)" value="${(f.desc&&f.desc.en)||''}" data-field="desc-en" data-idx="${j}">
                  <label><input type="checkbox" ${f.private?'checked':''} data-field="private" data-idx="${j}"> private</label>
                  <button type="button" class="btn btn-danger small-btn" onclick="removeField(${j},${idx})">‚®â</button>
                </div>
              `).join('')}
            </div>
            <button type="button" class="btn small-btn" onclick="addField(${idx})">–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ</button>
          </div>
          <div class="form-group methods-block">
            <label>–ú–µ—Ç–æ–¥—ã:</label>
            <div id="methods">
              ${(s.methods||[]).map((m,j) => `
                <div class="inline-group">
                  <input type="text" placeholder="–∏–º—è" value="${m.name||''}" data-method="name" data-idx="${j}">
                  <input type="text" placeholder="–∞—Ä–≥—É–º–µ–Ω—Ç—ã (—á–µ—Ä–µ–∑ ,)" value="${(m.args||[]).map(a=>a.name).join(',')}" data-method="args" data-idx="${j}">
                  <input type="text" placeholder="–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç" value="${m.returns||''}" data-method="returns" data-idx="${j}">
                  <input type="text" placeholder="–æ–ø–∏—Å–∞–Ω–∏–µ (ru)" value="${(m.desc&&m.desc.ru)||''}" data-method="desc-ru" data-idx="${j}">
                  <input type="text" placeholder="–æ–ø–∏—Å–∞–Ω–∏–µ (en)" value="${(m.desc&&m.desc.en)||''}" data-method="desc-en" data-idx="${j}">
                  <label><input type="checkbox" ${m.private?'checked':''} data-method="private" data-idx="${j}"> private</label>
                  <button type="button" class="btn btn-danger small-btn" onclick="removeMethod(${j},${idx})">‚®â</button>
                </div>
              `).join('')}
            </div>
            <button type="button" class="btn small-btn" onclick="addMethod(${idx})">–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥</button>
          </div>
          <button class="btn" type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <button class="btn btn-danger" type="button" onclick="cancelEdit('struct')">–û—Ç–º–µ–Ω–∞</button>
        </form>
      `;
      window.removeField = function(j, i) {
        if(idx==null) s.fields.splice(j,1);
        else docStructs[idx].fields.splice(j,1);
        showStructForm(idx==null?s:docStructs[idx], idx);
      };
      window.addField = function(i) {
        if(idx==null) (s.fields||(s.fields=[])).push({ name:'', type:'', desc:{ru:'',en:''} });
        else (docStructs[idx].fields||(docStructs[idx].fields=[])).push({ name:'', type:'', desc:{ru:'',en:''} });
        showStructForm(idx==null?s:docStructs[idx], idx);
      };
      window.removeMethod = function(j, i) {
        if(idx==null) s.methods.splice(j,1);
        else docStructs[idx].methods.splice(j,1);
        showStructForm(idx==null?s:docStructs[idx], idx);
      };
      window.addMethod = function(i) {
        if(idx==null) (s.methods||(s.methods=[])).push({ name:'', args:[], returns:'', desc:{ru:'',en:''} });
        else (docStructs[idx].methods||(docStructs[idx].methods=[])).push({ name:'', args:[], returns:'', desc:{ru:'',en:''} });
        showStructForm(idx==null?s:docStructs[idx], idx);
      };
      block.querySelectorAll('input').forEach(el => {
        el.oninput = function() {
          if(el.name==='name') s.name = el.value;
          if(el.name==='noConstructor') s.noConstructor = el.checked;
          if(el.dataset.field) {
            let j=+el.dataset.idx, f=s.fields[j];
            if(el.dataset.field==='name') f.name = el.value;
            if(el.dataset.field==='type') f.type = el.value;
            if(el.dataset.field==='desc-ru') (f.desc||(f.desc={})).ru = el.value;
            if(el.dataset.field==='desc-en') (f.desc||(f.desc={})).en = el.value;
            if(el.dataset.field==='private') f.private = el.checked;
          }
          if(el.dataset.method) {
            let j=+el.dataset.idx, m=s.methods[j];
            if(el.dataset.method==='name') m.name = el.value;
            if(el.dataset.method==='args') m.args = el.value.split(',').map(n=>({name:n.trim()})).filter(a=>a.name);
            if(el.dataset.method==='returns') m.returns = el.value;
            if(el.dataset.method==='desc-ru') (m.desc||(m.desc={})).ru = el.value;
            if(el.dataset.method==='desc-en') (m.desc||(m.desc={})).en = el.value;
            if(el.dataset.method==='private') m.private = el.checked;
          }
        };
      });
    }
    window.saveStruct = function(ev, idx) {
      ev.preventDefault();

      const form = ev.target;
      const s = {
        name: form.name.value,
        noConstructor: form.noConstructor ? form.noConstructor.checked : false,
        fields: [],
        methods: []
      };

      // –°–æ–±–∏—Ä–∞–µ–º –ø–æ–ª—è
      const fieldGroups = form.querySelectorAll('.fields-block .inline-group');
      fieldGroups.forEach(group => {
        const inputs = group.querySelectorAll('input');
        const f = {
          name: inputs[0].value,
          type: inputs[1].value,
          desc: { ru: inputs[2].value, en: inputs[3].value },
          private: inputs[4].checked
        };
        s.fields.push(f);
      });

      // –°–æ–±–∏—Ä–∞–µ–º –º–µ—Ç–æ–¥—ã
      const methodGroups = form.querySelectorAll('.methods-block .inline-group');
      methodGroups.forEach(group => {
        const inputs = group.querySelectorAll('input');
        const m = {
          name: inputs[0].value,
          args: inputs[1].value
            .split(',')
            .map(x => x.trim())
            .filter(x => x)
            .map(x => ({ name: x })),
          returns: inputs[2].value,
          desc: { ru: inputs[3].value, en: inputs[4].value },
          private: inputs[5].checked
        };
        s.methods.push(m);
      });

      if (idx == null) docStructs.push(s);
      else docStructs[idx] = s;

      renderStructs();
      document.getElementById('struct-form-block').innerHTML = '<div class="success">–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!</div>';
      setTimeout(() => {
        document.getElementById('struct-form-block').innerHTML = '';
      }, 800);
      return false;
    };

    function renderExamples() {
      const cont = document.getElementById('examples');
      cont.innerHTML = `<div class="section-title">–ü—Ä–∏–º–µ—Ä—ã</div>
        <div class="entity-list">
          ${docExamples.map((e, i) => `
            <div class="entity-item">
              <b>${e.title.ru||e.title.en}</b>
              <button class="btn small-btn" onclick="editExample(${i})">‚úé</button>
              <button class="btn btn-danger small-btn" onclick="deleteExample(${i})">‚®â</button>
            </div>
          `).join('')}
        </div>
        <button class="btn" onclick="addExample()">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä</button>
        <div id="example-form-block"></div>`;
    }
    window.renderExamples = renderExamples;
    function editExample(idx) {
      showExampleForm(JSON.parse(JSON.stringify(docExamples[idx])), idx);
    }
    function addExample() { showExampleForm({ title:{ru:'',en:''}, code:'' }, null); }
    function deleteExample(idx) {
      if(confirm('–£–¥–∞–ª–∏—Ç—å –ø—Ä–∏–º–µ—Ä?')) {
        docExamples.splice(idx, 1);
        renderExamples();
      }
    }
    window.editExample = editExample;
    window.addExample = addExample;
    window.deleteExample = deleteExample;
    function showExampleForm(e, idx) {
      const block = document.getElementById('example-form-block');
      block.innerHTML = `
        <form onsubmit="return saveExample(event,${idx})">
          <div class="form-group"><label>–ó–∞–≥–æ–ª–æ–≤–æ–∫ (ru):</label>
            <input type="text" name="title-ru" value="${(e.title&&e.title.ru)||''}">
          </div>
          <div class="form-group"><label>–ó–∞–≥–æ–ª–æ–≤–æ–∫ (en):</label>
            <input type="text" name="title-en" value="${(e.title&&e.title.en)||''}">
          </div>
          <div class="form-group"><label>–ö–æ–¥:</label>
            <textarea name="code">${e.code||''}</textarea>
          </div>
          <button class="btn" type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <button class="btn btn-danger" type="button" onclick="cancelEdit('example')">–û—Ç–º–µ–Ω–∞</button>
        </form>`;
      block.querySelectorAll('input,textarea').forEach(el => {
        el.oninput = function() {
          if(el.name==='title-ru') (e.title||(e.title={})).ru = el.value;
          if(el.name==='title-en') (e.title||(e.title={})).en = el.value;
          if(el.name==='code') e.code = el.value;
        };
      });
    }
    window.saveExample = function(ev, idx) {
      ev.preventDefault();
      const form = ev.target;
      const e = {
        title: { ru: form['title-ru'].value, en: form['title-en'].value },
        code: form.code.value
      };

      if (idx == null) docExamples.push(e);
      else docExamples[idx] = e;

      renderExamples();
      document.getElementById('example-form-block').innerHTML = '<div class="success">–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!</div>';
      setTimeout(()=>document.getElementById('example-form-block').innerHTML='', 800);
      return false;
    };

    function renderLabels() {
      const cont = document.getElementById('labels');
      cont.innerHTML = `<div class="section-title">–ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ –ª–µ–π–±–ª—ã</div>
        <form id="labels-form">
          ${['ru', 'en'].map(lang => `
            <fieldset style="margin-bottom:12px;border:1px solid #353945;border-radius:6px;padding:10px;">
              <legend>${lang === 'ru' ? '–†—É—Å—Å–∫–∏–π' : 'English'}</legend>
              ${Object.keys(LANGS[lang]).map(key => `
                <div class="form-group">
                  <label>${key}:</label>
                  <input type="text" name="${lang}-${key}" value="${LANGS[lang][key]}">
                </div>
              `).join('')}
            </fieldset>
          `).join('')}
        </form>`;
      document.querySelectorAll('#labels-form input').forEach(el => {
        el.oninput = function() {
          const [lang, key] = el.name.split('-');
          LANGS[lang][key] = el.value;
        };
      });
    }

    // –ü–µ—Ä–≤—ã–π —Ä–µ–Ω–¥–µ—Ä
    renderLangs();

    // ================== COPY AS JS =====================
    function jsStringifyObj(name, val) {
      // –î–ª—è window.–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö ‚Äî window.X = ...
      return /^window\./.test(name)
        ? name + " = " + JSON.stringify(val, null, 2) + ";"
        : "const " + name + " = " + JSON.stringify(val, null, 2) + ";";
    }
    function exportAsJS() {
      // –°–æ–±–∏—Ä–∞–µ–º JS –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
      let js =
`window.ApiDocuLangs = ${JSON.stringify(ApiDocuLangs, null, 2)};\n
const docFunctions = ${JSON.stringify(docFunctions, null, 2)};\n
const docStructs = ${JSON.stringify(docStructs, null, 2)};\n
const docExamples = ${JSON.stringify(docExamples, null, 2)};\n
const LANGS = ${JSON.stringify(LANGS, null, 2)};\n`;
      navigator.clipboard.writeText(js).then(() => {
        document.getElementById('copied-label').style.display = '';
        setTimeout(()=>document.getElementById('copied-label').style.display='none', 1200);
      });
    }
    window.exportAsJS = exportAsJS;
  </script>
</body>
</html>